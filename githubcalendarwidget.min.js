const y={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};const i=600;const l={t:"#00ff00",backgroundColor:"#212121"};let c=null;function $(e){if(e>=1){return"FF"}if(e<0){throw new Error("Input must be in the range of 0.00 to 1.00")}const t=Math.round(e*255);const o=t.toString(16).padStart(2,"0").toUpperCase();return o}function a(s,e,d){const t=new Date;t.setDate(t.getDate()-365);const o=t.getMonth();const n=document.getElementById("calendar-component");const c=document.createElement("h1");c.textContent="GitHub Activity Calendar";n.append(c);const a=document.createElement("div");a.className="months";for(let e=0;e<13;e++){const g=document.createElement("div");g.className="month";const w=e+o>11?e+o-12:e+o;g.textContent=`${y[w]}`;a.append(g)}const r=document.createElement("div");r.className="calendar-wrapper";const i=document.createElement("aside");i.id="weekdays-name-container";const l=["Sat","Sun","Mon","Tue","Wed","Thu","Fri"];for(let e of l){const b=document.createElement("div");b.className="weekday-name";b.textContent=e;i.append(b)}const p=document.createElement("div");p.id="calendar";p.innerHTML="";function u(e,t,o){const n=document.createElement("div");n.classList.add("day");const c=new Date;c.setDate(c.getDate()-365+(t+o*7));const a=c.toISOString().split("T")[0];const r=s.find(e=>e.o===a);if(r&&r.i>0){const l=r.i/10;n.setAttribute("style",`background-color:${d["t"]+$(l)};
			align-content: baseline;`)}n.setAttribute("date",c.toLocaleDateString("en-US",{month:"short",day:"2-digit"}));n.addEventListener("touchstart",()=>{n.classList.add("hovered")});n.addEventListener("touchend",()=>{n.classList.remove("hovered")});n.addEventListener("touchcancel",()=>{n.classList.remove("hovered")});n.addEventListener("touchmove",()=>{n.classList.remove("hovered")});if(r){n.setAttribute("contributions",r.i);if(r.i>=10){n.textContent="*"}}const i=new Date;if(c>i){n.style.backgroundColor="transparent";n.style.border="0px";n.removeAttribute("contributions");n.removeAttribute("date");n.className=""}e.appendChild(n)}function f(){n.append(a);r.append(i);r.append(p);n.append(r);for(let t=0;t<7;t++){for(let e=0;e<53;e++){u(p,t,e)}}}function m(){n.append(i);r.append(a);r.append(p);n.append(r);for(let t=0;t<53;t++){for(let e=0;e<7;e++){u(p,e,t)}}}if(e){f()}else{m()}const h=`
  #calendar {
    display: grid;
    /* 53 columns for each week in a year */
    grid-template-columns: ${e?`repeat(53, 16px)`:`repeat(7, 32px)`};
    /* 7 rows for each day of the week */
    grid-template-rows: ${e?`repeat(7, 16px)`:`repeat(53, 32px)`};
    gap: ${e?`2px`:`6px 8px`};
  }
  
  .day {
    width: ${e?`16px`:`32px`};
    height: ${e?`16px`:`32px`};
    border: 1px solid ${d["t"]+"80"};
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
	background-color: rgba(0,0,0,0.7);
	color: black;
	font-weight: bold;
	${!e?`font-size: 24px;`:""}
  }
  .day:hover::after, hovered::after {
    content: attr(contributions) " contributions on " attr(date);
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translate(-50%, -60px);
    background-color: ${d["backgroundColor"]};
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 5px;
    white-space: nowrap;
    color: ${d["t"]};
	font-weight: normal;
	font-size: 16px;
    z-index: 5;
	clip-path: polygon(0% 0%, 100% 0%, 100% 65%, 50% 100%, 0% 65%);
  	height: 32px;
	border: 2px solid ${d["t"]};
  }
  .calendar-wrapper {
    display: flex;
    flex-direction: row;
    justify-content: ${e?`center`:`left`};
  }
  #weekdays-name-container {
	${!e?`display: flex;justify-content:left;flex-direction: row;margin-left: 64px;`:``}
    text-align: ${e?`right`:`left`};
	${e?`width: 32px;`:``}
  }
  #weekdays-name-container .weekday-name {
    width: ${e?`16px`:"40px"};
    height: 16px;
	margin-bottom: 2px;
  	line-height: 16px;
  }
  .months {
    display: flex;
    flex-direction: ${e?"row":"column"};
    justify-content: space-between;
    margin-left: ${e?`32px`:`24px`};
  }
  .month {
	text-align: left;
	${!e?`width: 40px;`:``}
  }
  #calendar-component{
	background-color: ${d["backgroundColor"]};
	color: ${d["t"]};
    font-size: 16px;
	width: fit-content;
  }
  #calendar-component * {
	box-sizing: border-box;
	font-family: "Roboto Mono", monospace;
  }
  #calendar-component > h1{
    margin-bottom: 0.5rem;
    text-align: ${e?`center`:`left`};
	${!e?`font-size: 1.5rem;`:``}
  }
  `;const x=document.createElement("style");x.textContent=h;document.head.appendChild(x)}async function r(e){const t=await fetch(`https://nulljuju.dev/github_calendar/${e}`,{method:"GET",mode:"cors",cache:"no-cache",headers:{l:"application/json"}});const o=await t.json();if(o&&t.status===200){return o}else{console.error("Error in fetching GitHub data from server")}}async function s(e,t,o){try{c=await r(e);if(!c||c.length===0){console.error("No contribution data available.");return}a(c,t,o)}catch(n){console.error("Error fetching contribution data:",n)}}function e(){let e=document.getElementById("calendar-component")===null?false:true;while(!e){setTimeout(()=>{e=document.getElementById("calendar-component")===null?false:true;console.log("Waiting for all HTML load...")},500)}const t=document.getElementById("calendar-component");if(t){const o=window.innerWidth;const n=o>i?true:false;const c=t.getAttribute("username");const a=t.getAttribute("theme-color");const r=t.getAttribute("background-color");if(a){l["t"]=a}if(r){l["backgroundColor"]=r}if(c.length>0){console.log("Generating the GitHub Calendar ...");s(c,n,l)}else{console.error("Username was not provided!\n",`username fetched:${c}\n`)}}}e();